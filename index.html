<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>News mit Matrix + Swipeable Nav</title>
<meta name="description" content="A simple RSS feed news site." />

  
   <!-- Manifest für PWA -->
  <link rel="manifest" href="manifest.json">

  <!-- Favicons für Browser -->
 <link rel="icon" type="image/png" href="icon-512.png">

 <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32">

  <!-- Apple Touch Icon (iOS Homescreen) -->
  <link rel="apple-touch-icon" href="icon-512.png">

  <!-- Theme-Farben für Browser-UI -->
  <meta name="theme-color" content="#0b0d12">
  <meta name="background-color" content="#0b0d12">

  <!-- Optional: Windows Tile Icons -->
  <meta name="msapplication-TileImage" content="icon-512.png">
  <meta name="msapplication-TileColor" content="#0b0d12">
  


  
<style>
  
    body { margin:0; font-family:sans-serif; height:100vh; overflow:hidden; background:#000; }
    canvas#matrixCanvas { position:fixed; top:0; left:0; width:100%; height:100%; z-index:0; background:black; }

    .overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(18,18,18,0.85); 
          backdrop-filter:blur(2px); z-index:1; display:flex; flex-direction:column; justify-content:flex-end; }

    .content-wrapper { flex-grow:1; display:flex; overflow:hidden; }
    .tab-content { flex:0 0 100%; overflow-y:auto; padding:12em 1em 12em 1em; box-sizing:border-box; display:none; }
    .tab-content.active { display:block; }

    a { color:#03a9f4; text-decoration:none; display:block; margin:0.5em 0; }
    a:hover { text-decoration:underline; }

    .nav-button { 
      position:fixed; 
      bottom:20px;
      left:50%; 
      transform:translateX(-50%); 
      width:60px; height:60px; border-radius:50%; background:rgba(3,218,198,0.7); 
      display:flex; 
      align-items:center; 
      justify-content:center; 
      cursor:pointer; z-index:10; 
      box-shadow:0 4px 10px rgba(0,0,0,0.3); 
      -webkit-tap-highlight-color: transparent; /* FÜR MOBILE GERÄTE */
      outline: none; /* Für das Deaktivieren des Fokus-Randes bei Klicks/Tab-Navigation */
      transition: background 0.3s; }
  
.nav-button.open { background: rgba(3,218,198,1); }

.nav-button:focus {
  outline: none;
}

.tabs {
  position:fixed;
  bottom:-70px;
  left:0;
  width:100%;
  height:60px;
  background:rgba(30,30,30,0.8);
  display:flex;
  overflow-x:auto;
  overflow-y:hidden;
  scroll-snap-type:x mandatory;
  -webkit-overflow-scrolling: touch;
  justify-content:flex-start;
  align-items:center;
  border-top:2px solid #03dac6;
  transition:bottom 0.4s ease;
  z-index:9;
  overscroll-behavior-x:contain;
}
    .tabs.show { bottom:90px; }

    .tab { flex:0 0 auto; padding:0.5em 1em; cursor:pointer;
      white-space:nowrap; border-radius:8px; margin:0 5px; 
      transition: background 0.3s; scroll-snap-align:start; 
      color:white; }
  
    .tab:hover { background: rgba(255,255,255,0.1); }
  
    .tab.active { color:#03dac6; font-weight:bold; }

    .tab-content ul { list-style:none; padding:0; margin:0; }
  
   .tab-content li { 
    margin: 0.5em 0; 
    
    /* NEU: Rand um jeden Feed-Eintrag */
    border: 1px solid #333; /* Schmaler, dunkler, grauer Rand */
    border-radius: 4px; /* Leichte Abrundung für die Optik */
    padding: 0.7em; /* Innerer Abstand zwischen Rand und Text */
    background: rgba(30, 30, 30, 0.5); /* Leichter Hintergrund zur besseren Abgrenzung */
}

 
    .tab-content li a {
      margin: 0; 
    }
  
    .muted { color:#aaa; font-size:0.9em; }
  
</style>
</head>
<body>

<canvas id="matrixCanvas"></canvas>

<div class="overlay">
  <div class="content-wrapper">
    <div class="tab-content active" data-tab="0" id="feed-de"></div>
    <div class="tab-content" data-tab="1" id="feed-int"></div>
    <div class="tab-content" data-tab="2" id="feed-tech"></div>
    <div class="tab-content" data-tab="3" id="feed-media"></div>
  </div>

  <div class="nav-button" id="navButton">☰</div>

  <div class="tabs" id="tabs">
    <div class="tab active" data-index="0">Deutschland</div>
    <div class="tab" data-index="1">International</div>
    <div class="tab" data-index="2">Technik</div>
    <div class="tab" data-index="3">Medien</div>
  </div>
</div>

<script>
// Matrix Regen
const canvas=document.getElementById('matrixCanvas'),ctx=canvas.getContext('2d');
function resizeCanvas(){canvas.width=window.innerWidth; canvas.height=window.innerHeight;}
window.addEventListener('resize',resizeCanvas); resizeCanvas();
const letters='ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-=+/<>*',fontSize=16;
let columns=Math.floor(canvas.width/fontSize),drops=Array(columns).fill(1);
function drawMatrix(){
  ctx.fillStyle='rgba(0,0,0,0.05)'; ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle='#0f0'; ctx.font=fontSize+'px monospace';
  for(let i=0;i<drops.length;i++){
    const text=letters.charAt(Math.floor(Math.random()*letters.length));
    ctx.fillText(text,i*fontSize,drops[i]*fontSize);
    if(drops[i]*fontSize>canvas.height && Math.random()>0.975) drops[i]=0;
    drops[i]++;
  }
}
setInterval(drawMatrix,35);

// Feeds
const FEEDS={
  "feed-de":[
    "https://feeds.streich3r.org/feed?url=https://www.tagesschau.de/inland/index~rss2.xml",
    "https://feeds.streich3r.org/feed?url=https://www.sueddeutsche.de/rss"
  ],
  "feed-int":[
    "https://feeds.streich3r.org/feed?url=https://www.srf.ch/news/bnf/rss/1922",
    "https://feeds.streich3r.org/feed?url=https://www.nzz.ch/international.rss"
  ],
  "feed-tech":[
    "https://feeds.streich3r.org/feed?url=https://www.srf.ch/bnf/rss/19920122",
    "https://feeds.streich3r.org/feed?url=https://www.nzz.ch/technologie.rss"
  ],
  "feed-media":[
    "https://feeds.streich3r.org/feed?url=https://www.nzz.ch/feuilleton.rss",
    "https://feeds.streich3r.org/feed?url=https://www.derbund.ch/arc/outboundfeeds/rss/category/medien"
  ]
};

function renderItems(items){
  let html="<ul>";
  // Beachten Sie: Es ist besser, hier nur .slice(0, 12) aufzurufen, falls die Sortierung später erfolgt.
  items.slice(0,12).forEach(item=>{
    const title=item.title||"Kein Titel",link=item.link||"#",date=item.pubDate||item.isoDate||"";
    const dateHtml=date?`<div class="muted">${new Date(date).toLocaleString()}</div>`:"";
    html+=`<li><a href="${link}" target="_blank" rel="noopener">${title}</a>${dateHtml}</li>`;
  });
  html+="</ul>"; return html;
}

function loadFeed(containerId,urls){
  const el=document.getElementById(containerId);
  el.innerHTML="<p class='muted'>Lade Feed…</p>";
  let attempt=0;
  function tryLoad(){
    if(!urls[attempt]) { el.innerHTML="<p class='muted'>Feed konnte nicht geladen werden.</p>"; return; }
    fetch(urls[attempt])
      .then(res=>res.json())
      .then(data=>{
        let items=Array.isArray(data.items)?data.items:[];
        
        // NEU: Sortiere die Elemente chronologisch (neueste zuerst)
        items.sort((a, b) => {
          const dateA = new Date(a.isoDate || a.pubDate);
          const dateB = new Date(b.isoDate || b.pubDate);
          // b - a sortiert absteigend (neueste zuerst)
          return dateB - dateA; 
        });

        if(items.length) el.innerHTML=renderItems(items);
        else { attempt++; tryLoad(); }
      })
      .catch(()=>{ attempt++; tryLoad(); });
  }
  tryLoad();
}

// Tabs & Nav
const navButton=document.getElementById('navButton'),tabsBar=document.getElementById('tabs'),tabs=document.querySelectorAll('.tab'),contents=document.querySelectorAll('.tab-content');
let tabsVisible=false;

// Start mit Deutschland
contents[0].classList.add('active');
loadFeed('feed-de',FEEDS['feed-de']);
tabs[0].classList.add('active');

function showTabs(show){
  tabsVisible=show;
  tabsBar.classList.toggle('show',show);
  navButton.classList.toggle('open',show);

  **if (show) {**
    **// 1. Finde den aktuell aktiven Tab**
    **const activeTab = document.querySelector('.tab.active');**
    
    **if (activeTab) {**
      **// 2. Scrolle den aktiven Tab in die Mitte der Navigationsleiste**
      **activeTab.scrollIntoView({**
        **behavior: 'smooth',**
        **inline: 'center'**
      **});**
    **}**
  **}**
}

navButton.addEventListener('click',()=>{ showTabs(!tabsVisible); });

tabs.forEach((tab,i)=>{
  tab.addEventListener('click',()=>{
    tabs.forEach(t=>t.classList.remove('active'));
    tab.classList.add('active');
    contents.forEach(c=>c.classList.remove('active'));
    contents[i].classList.add('active');
    loadFeed(contents[i].id,FEEDS[contents[i].id]);
    showTabs(false);
  });
});

</script>

</body>
</html>
